<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>미션</title>

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .slider {
            width: 260px;
            border: 1px solid #eee;
            padding: 5px;
            position: absolute;
            left: 50px;
        }

        .slider .view {
            width: 250px;
            height: 279px;
            position: relative;
            margin: 5px;
        }

        .slider .view img {
            width: 250px;
            height: 279px;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0.2;
        }

        .slider .thumb-list .thumb {
            margin: 4px;
            float: left;
            width: 78px;
            height: 78px;
            position: relative;
        }

        .slider .thumb-list img {
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>

    <script type="text/javascript" src="./libs/jquery-3.3.1.min.js">
    </script>
    <script type="text/javascript" src="./libs/jquery.easing.1.3.js">
    </script>

    <script>
        /*
             미션:
              다음 사이트의 팝업 콘텐츠를
                 http://ecudemo14252.cafe24.com/

        step #08
            - 리팩토링 코드 다듬기
                - autoPlay 다음 이미지 처리를 메서드로 만들기

        step #07
            - 오토 플레이  기능 추가
            - 문제점:
                타이머와 마우스over가 동일한 시점에 실행되는 경우
                이미지가 2번 움직이는 듯한 현상 발생

         step #06
            - 리팩 토링 코드 다듬기
                - 선택 처리 전문 메서드 추가

        step #05
            - 썸네일 over시 이미지 활성화 추가

        step #04-02
            - 리팩토링
                - 선택 처리를 index에서 object로 변경

        step #04-01
            - 리팩토링
                - 썸네일 활성화 처리를 메서드로 만들기

        step #03
            - 썸네일에 이벤트 처리 추가

        step #02
            - n번째 썸네일 활성화

        step #01
            - 클래스 구조 잡기
          */
        $(document).ready(function() {

            var viewer1 = new ProductViewer("#slider1");
        });

        class ProductViewer {

            constructor(selector){
                this.selector = selector;
                this.currentIndex = 0;
                this.$thumbList = null;
                this.$imageList = null;

                this.start();
            }

            start(){
                this.init();
                this.initEvent();
                this.startAutoPlay();
            }

            init(){
                var $body = $(this.selector);
                this.$thumbList = $body.find(".thumb img:nth-child(2)");
                this.$thumbList.css("opacity", 0);
                this.$thumbList.eq(this.currentIndex).css("opacity", 1);

                this.$imageList = $body.find(".view img");
                this.$imageList.css("opacity", 0);
                this.$imageList.eq(this.currentIndex).css("opacity", 1);

            }

            initEvent(){
                this.$thumbList.mouseenter((event)=>{
                    var index = this.$thumbList.index(event.target);
                    this.setImageAt(index);
                })
            }

            showThumbAt(index){
                this.$thumbList.eq(this.currentIndex).css("opacity", 0);
                this.$thumbList.eq(index).css("opacity", 1);
            }

            showImageAt(index){
                this.$imageList.eq(this.currentIndex).css("opacity", 0);
                this.$imageList.eq(index).css("opacity", 1);
            }

            setImageAt(index){
                this.showThumbAt(index);
                this.showImageAt(index);
                this.currentIndex = index;
            }

            startAutoPlay(){
                setInterval(()=>{
                    this.nextImage();
                }, 2000)
            }

            nextImage() {
                var index = this.currentIndex + 1;
                if (index >= this.$imageList.length) {
                    index = 0;
                }
                this.setImageAt(index);
            }
        }
    </script>


</head>

<body>
<div class="slider" id="slider1">
    <div class="view">
        <img src="images/popupbanner1.jpg">
        <img src="images/popupbanner2.jpg">
        <img src="images/popupbanner3.jpg">
        <img src="images/popupbanner4.jpg">
        <img src="images/popupbanner5.jpg">
        <img src="images/popupbanner6.jpg">
    </div>
    <div class="thumb-list">
        <div class="thumb">
            <img src="images/btn1.jpg">
            <img src="images/btn1a.jpg">
        </div>
        <div class="thumb">
            <img src="images/btn2.jpg">
            <img src="images/btn2a.jpg">
        </div>
        <div class="thumb">
            <img src="images/btn3.jpg">
            <img src="images/btn3a.jpg">
        </div>
        <div class="thumb">
            <img src="images/btn4.jpg">
            <img src="images/btn4a.jpg">
        </div>
        <div class="thumb">
            <img src="images/btn5.jpg">
            <img src="images/btn5a.jpg">
        </div>
        <div class="thumb">
            <img src="images/btn6.jpg">
            <img src="images/btn6a.jpg">
        </div>
    </div>
</div>
</body>

</html>